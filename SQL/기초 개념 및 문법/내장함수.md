# SQL 함수
- DBMS가 제공하는 내장함수
- 사용자 정의함수

# SQL 내장함수
- 단일값을 반환함.(스칼라값)
- 내장함수는 최초 선언 시에 유효한 입력 값을 받아야 한다.
    - (ex) 숫자 함수의 입력값은 정수나 실수가 와야 한다.
- 유효한 값이 아닌 경우 질의 실행을 중단하고 에러 메세지를 출력한다.
- 내장함수는 SELECT, WHERE, UPDATE 절 등에서 모두 사용이 가능하다.

## 숫자함수
| 함수           | 설명                                               |
|--------------|--------------------------------------------------|
| ABS(숫자)      | 숫자의 절대값을 계산 (ex) ABS(-4.5) -> 4.5                  |
| CEIL(숫자)     | 숫자의 올림 (ex) CEIL(4.1) -> 5             |
| FLOOR(숫자)    | 숫자의 내림 (ex) FLOOR(4.1) -> 4            |
| ROUND(숫자, m) | 숫자의 반올림, m은 반올림 기준 자릿수 (ex) ROUND(5.36, 1) -> 5.40 |
| LOG(n, 숫자)   | 숫자의 자연로그 값을 반환 (ex) LOG(10) -> 2.30259             |
| POWER(숫자, n) | 숫자의 n제곱 값을 계산 (ex) POWER(2, 3) -> 8                |
| SQRT(숫자)     | 숫자의 제곱근 값을 계산(숫자은 양수) (ex) SQRT(9.0) -> 3.0        |
| SIGN(숫자)     | 숫자가 음수면 -1, 0이면 0, 양수면 1 (ex) SIGN(3.45) -> 1      |

- 숫자함수는 입력값으로 직접 숫자를 입력할 수도 있지만, 숫자가 입력된 레코드를 사용할 수 있다.
- 또한 여러 숫자 함수를 복합적으로 사용 가능하다.

## 문자함수
- s : 문자열, c: 문자, n : 정수, k : 정수
- 문자값 반환 함수
    1. CONCAT(s1,s2) : 두 문자열(s1,s2) 연결.
    2. LOWER(s) : 문자열(s)을 소문자로 변환.
    3. UPPER(s) : 문자열(s)을 대문자로 변환.
    4. LPAD(s,n,c) : 문자열(s) 오른쪽 정렬 후 왼쪽부터 지정자릿수(n)까지 지정문자(c)로 채움.
        - (ex) `LPAD('ab',5,'*') -> '***ab' `
    5. REPLACE(s1,s2,s3) : 지정 테이블(s1)의 기존 문자열(s2)을 새로운 문자열(s3)로 변경.
    6. RPAD(s,n,c) : 문자열(s) 왼쪽 정렬 후 오른쪽부터 지정자릿수(n)까지 지정문자(c)로 채움.
        - (ex) `RPAD('ab',5,'*') -> 'ab***'`
    7. SUBSTR(s,n,k) : 문자열(s)의 지정 자리수(n)부터 길이(k)만큼 잘라서 반환.
        - (ex) `SUBSTR('ABCDEFG',3,4) -> 'CDEF'`
    8. TRIM(c FROM s) : 문자열(s)의 양쪽에 지정 문자(c)를 지운다.
        - 문자를 지정하지 않고 문자열만 넣을 경우, 기본으로 공백제거 해준다.
- 숫자값 반환 함수
    1. ASCII(c) : 대상 영문자의 아스키 코드값을 반환.
    2. LENGTH(s) : 문자열(s)의 Byte값 반환.
        - 영문자 : 1byte, 한글 : 3byte
        - 한문자가 차지하는 바이트는 사용하는 DB의 환경변수에 따라 다르다.
    3. CHAR_LENGTH(s) : 문자열(s)의 문자수 반환.

## 날짜 시간함수
- 종류
    | 함수 | 반환형 | 설명 |
    |----  |-----  |----      |
    |STR_TO_DATE(String, format) | DATE | 문자열 데이터를 날짜형으로 변환|
    | DATE_FORMAT(date,format) | STRING | 날짜형 데이터를 문자열로 변환|
    | ADDDATE(date,interval) | DATE | DATE형 날짜에서 INTERVAL 지정한 시간만큼 더함|
    | DATE(date) | DATE | DATE형의 날짜 부분을 반환|
    | DATEDIFF(date1,date2) | INTEGER | DATE형의 date1 - date2의 차이를 반환|
    | SYSDATE | DATE | DBMS 시스템상의 오늘 날짜를 반환하는 함수|

- format의 주요 지정자
    | 인자 | 설명                      |
    |----|----------------------------|
    | %Y | 4자리 연도                  |
    | %y | 4자리 연도의 마지막 2 자리   |
    | %m | 월 순서(01~12, January=01) |
    | %d | 1달 중 날짜(00~31)         |
    | %w | 요일 순서(0~6, Sunday=0)   |
    | %h | 12시간(01~12)              |
    | %i | 분(0~59)                  |
    | %s | 초(0~59)                  |
    | %b | 월 이름 약어(Jan~Dec)      |
    | %M | 월 이름(January~December)  |
    | %W | 요일(Sunday ~ Saturday)    |
    | %a | 요일의 약자(Sun~Sat)       |
    | %i | 1년 중 날짜(001~366)       |
    | %H | 24시간(00~23)             |
    

