# 인덱스
## 인덱스란?
- 책의 목차와 동일한 개념.(책 내부 해당 내용을 빠르게 찾기위한 것.)
- 데이터를 빠르게 찾기위한 목적으로 사용하는 것.(검색)
- 데이터 베이스에서 인덱스의 정의는 원하는 데이터를 빠르게 찾기 위해
  ***투플의 키 값에 대한 물리적 위치를 기록해둔 자료구조.***
  - 투플 = 레코드 = 인스턴스 : 각 컬럼에 들어간 실제 데이터를 의미.
  - 키 값 : 데이터를 식별하는 고유한 식별자.
- <MARK>정리 : 인덱스란 ? 데이터의 고유 식별자의 물리적 위치를 기록한 자료 구조.(데이터를 쉽게 찾기 위함.)</MARK>

### 인덱스 특징
- 이진트리 형태로 구성되어 데이터 조회가 빠르다.
- 데이터 정렬도 빠르다.
- 데이터 추가, 삭제, 수정 시 이진트리의 재구성하는데 시간이 소요된다.

### 데이터 조회 방식
- FULL SCAN : 모든 데이터를 조회.
- INDEX SCAN : 인덱스로 조회.

### MYSQL 인덱스의 종류
- 클러스터(cluster : 무리) 인덱스 : 기본 인덱스
    - 기본키(PRIMARY KEY) -> UNIQUE 키 -> 키가 없는 경우, row ID 를 자동으로 넣어줌.
    - 클러스터 인덱스가 없으면, 데이터 조회 자체가 불가능하다.
    - 결국 해당 레코드(실제 데이터)를 찾는 인덱스는 클러스터 인덱스이다.
- 보조 인덱스 : 클러스터 인덱스가 아닌 인덱스.
    - 기본 키 속성(컬럼)을 보조 인덱스를 통해서 찾고, 클러스터 인덱스로 넘어가서 해당 레코드를 찾는다.

## (보조)인덱스 생성
- 인덱스를 생성하는 목적은 데이터 검색을 빠르게하기 위해서 이지만,
  인덱스 생성을 통해 무조건 빠른 검색이 가능한 것은 아니다.
- 데이터 양이 적거나 선택가 높을 경우 인덱스가 없는 것이 더 빠를 수 있다.
    - 선택도가 높다 = 다른 종류의 인스턴스 갯수 = 적은 종류의 데이터 양. EX) 성별 : 암컷,수컷
    - 선택도가 낮다 = 많은 종류의 인스턴스 갯수 = 많은 종류의 데이터 양. EX) 동물종류 : 사자,코끼리,뱀,인간,...
- 위와 같은 이유로 무의미한 인덱스의 생성은 저장 공간을 낭비한다.

### 인덱스 생성 문법
```
CREATE [UNIQUE] INDEX [인덱스이름]
ON 테이블이름 (컬럼 [ASC | DESC] ,[{ 컬럼 [ASC | DESC]} ...])[;]
```

### 인덱스 사용 시 유의점
- = 연산자의 경우 INDEX SCAN을 하지만 LIKE의 경우 어느 범위를 조회하는지에 따라 INDEX SCAN  또는 FULL SCAN을 한다.

## 인덱스 재구성 및 삭제
### 인덱스 재구성(최적화)
- B-tree 구조의 인덱스는 데이터의 수정, 삭제, 삽입이 잦으면 노드의 갱신이 주기적으로 일어나 **단편화(fragmentation)현상**이 발생한다.
    - 단편화란 ? 삭제된 레코드의 인덱스 값 자리가 비게 되는 상태를 말하는데, 이는 검색시 성능저하로 이어진다.
- 이러한 경우 인덱스 재구성을 통해 최적화 해준다.
```
ANALYZE TABLE 테이블이름;
```

### 인덱스 삭제
```
DROP INDEX 인덱스명 ON 테이블명;
```