# 람다식
## 1. 람다식이란?
- 익명함수(메서드명과 반환형을 생략하므로) 라고도 불린다.
- 기능(메서드)을 하나의 식으로 표현한 것.
- 람다식은 식을 객체처럼 사용하는 것.

## 2. 람다식 작성 문법
- 기존 메서드
    - `반환타입 메서드명(매개변수){ 기능 구현 }`
- *람다식*
    - `(매개변수) -> { 기능구현 }`

- 좀 더 편하게 작성하기
    1. 매개변수의 자료형과 소괄호 생략하기
        - 매개변수가 하나인 경우 자료형과 소괄호 생략 가능.
        - 매개변수 자료형이 명시된 경우 소괄호도 생략이 불가.
        - 매개변수가 2개 이상인 경우, 소괄호 생략 불가.
    ```
    기존 : (int a) -> {return a * 2;}
    매개변수 생략 : a -> {return a*2;}
    매개변수 2개 이상 : (a,b) -> {return a+b;}
    ```
    2. 중괄호 생략하기
        - 중괄호 안의 구현 코드가 한문장인 경우 생략 가능.
        - 끝에 ';' 생략해줘야 한다.
        - return 문인 경우, 중괄호 생략이 불가능.
    ```
    기존 : a -> {return a*2;}
    return문 및 중괄호 생략 : a->a*2
    ```
    3. return문 생략하기
        - 중괄호 안의 구현 코드가 return문 하나인 경우, retrun 생략이 가능하다.
        - return문 생략 시 문장이 아닌 식(express)이므로 끝에 ';'을 생략한다.

## 3. 함수형 인터페이스
- 람다식은 익명 클래스의 객체와 동일하다.
- 즉, 미구현한 인터페이스의 메서드를 식으로 구현한 객체가 람다식이고, 이러한 인터페이스를 '함수형 인터페이스'라고 한다.
- 함수형 인터페이스는 하나의 추상 메서드만 정의되어야 한다는 제약이 있지만, defualt 메서드 또는 정적메서드는 갯수제한이 없다.

### 함수형 인터페이스 타입의 매개변수와 반환 타입
1. 메서드의 매개변수의 자료형이 함수형 인터페이스 타입이라고 가장하자.
    - 이 때, 함수형 인터페이스를 구현한 람다식을 참조하는 참조변수를 매개변수로 지정할 수 있다.
    - 또는, 메서드의 매개변수 지정괄호 안에 참조변수 없이 람다식 자체를 지정할 수도 있다.
    - 람다식을 매개변수로 넣는것은 해당 식으로 요소에 어떠한 action을 추가하기 위해 주로 사용한다.

2. 메서드의 반환 타입이 함수형 인터페이스 타입이라고 가정하자.
    - 마찬가지로 람다식을 가리키는 참조변수를 반환하거나, 람다식을 직접 반환할 수 있다.
- 중요한 사실은 람다식을 참조 변수안에 담을 수 있다는 것은, 람다식이 함수형 인터페이스를 구현한 객체라는 사실이다.

### 람다식의 타입과 형변환
- 위에서 말했듯이 람다식은 객체이고, 참조변수의 자료형으로 함수형 인터페이스 타입이 온다.
- 이는 컴파일 시 자동으로 형변환 되어 참조가 가능한 것일 뿐이며, 실제 람다식의 자료형이 함수형 인터페이스의 타입은 아니다.(익명 객체는 컴파일러가 임의로 타입을 지정하기 때문이다.)
- 하지만, 람다식은 오직 함수형 인터페이스로만 형변환이 가능하며, 다른 타입으로 형변환 시 오류가 발생한다.
    - 모든 클래스의 부모인 Object로도 형변환 불가능.

### 외부 변수를 참조하는 람다식
- 람다식은 익명 내부 클래스를 구현한 객체와 동일하다.
- 따라서 속성도 동일한데, 람다식에서 참조하는 외부변수는 **상수화** 된다.
- 원래 메서드의 지역변수는 메서드 반환값 반환과 함께 스택에서 메모리가 소멸되지만, 람다식 내부에서 사용하는 외부 지역변수는 컴파일 시 상수로 변환되어 해당 참조가 끊기지 않도록 해준다.
- 또한, 람다식의 매개변수명은 외부 지역변수명과 중복이 불가능하다.
<br><br>

## 4. java.util.function
- 주요 함수형 인터페이스
1. `Supplier<T>`
    - T get() : 매개변수는 없고 반환값만 있는 함수.
2. `Consumer<T>`
    - void accept(T t) : 매개변수는 있고 반환값이 없는 함수.
3. `Function<T,R>`
    - R apply(T t) : 매개변수와 반환값 모두 있는 함수.
4. `Predicate<T>`
    - boolean test(T t) : 조건식을 사용할때 사용하는 함수.

- 매개변수가 2개 이상인 함수형 인터페이스
1. `BiConsumert<T,U>`
    - void accept(T t, U u) : 매개변수는 2개, 반환값 없는 함수.
2. `BiFunction<T,U,R>`
    - R apply(T t, U u) : 매개변수는 2개 반환값이 있는 함수.
3. `BiPredicate<T,U>`
    - boolean test(T t, U u) : 매개변수는 2개 반환형이 boolean인 함수.

- 매개변수와 반환값 자료형이 같은 함수형 인터페이스
1. `UnaryOperator<T>`
    - T apply(T t) : 매개변수와 반환값의 타입이 같은 Function 함수.
2. `BinaryOperator<T>`
    - T apply(T t1,T t2) : 매개변수 2개와 반환값의 타입이 같은 Function 함수.

- 매개변수와 반환값 자료형이 기본형인 함수형 인터페이스
1. `AToBFunction`
    - B apply(A a) : 매개변수 타입이 A(기본자료형)이고 반환값 타입이 B인 Function 함수.
2. `ToBFunction<T>`
    - B apply(T t) : 매개변수 타입이 지네릭 타입이고 반환값 타입이 B(기본자료형)인 Function 함수.
3. `AFunction<R>`
    - R apply(A a) : 매개변수 타입이 A이고 반환값 타입이 지네릭인 Function 함수
4. `ObjAConsumer<T>`
    - void accept(T t, U u) : 매개변수 타입이 지네릭과 A이고, 반환값은 없는 함수.

## 5. Function의 합성과 Predicate의 결합
- Function 함수형 인터페이스 내 default 메서드와 static 메서드
    - default 메서드
        1. andthen()
            - A.andthen(B) : A함수 수행 후 B함수 수행.
        2. compose()
            - A.compose(B) : B함수 수행 후 A함수 수행.
    - static 메서드
        1. indentity() : x->x(항등함수)
- Predicate 함수형 인터페이스 내 default 메서드와 static 메서드
    - default
        1. A.and(B) : A조건 && B조건 == 둘 다 true -> true
        2. A.or(B) : A조건 || B조건 == 둘 다 false -> false
        3. A.negate() : !A
    - static
        - Predicate.equals(A).test(B) : A와 B가 동일한지 확인.

## 6. 메서드 참조
- 람다식을 더욱 간결하게 표현할 수 있는 방법.
- 람다식이 하나의 메서드만 호출하는 경우, '클래스이름::메서드이름' 또는 '참조변수::메서드이름'으로 바꿀수있다.
- 생성자 메서드 참조
    - '클래스이름::new'
    - 매개변수가 있는 생성자도 가능하며, 메서드 호출 시 매개변수 값을 순서대로 넣어주기만 하면된다.