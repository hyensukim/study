# 1. 프로세스와 쓰레드
## 프로세스란?
- 프로그램을 실행하면 OS로 부터 실행에 필요한 자원(메모리)을 할당받아 실행하게 되는데 이러한 실행 중인 프로그램을 '프로세스'라고 한다.

## 프로세스 구성
- 프로세스는 프로그램 실행에 필요한 자원 + 쓰레드로 구성되어 있다.

## 쓰레드(작업대)
- 프로세스의 자원을 이용해 실제 작업을 수행하는 것이 쓰레드이다.
- 따라서, 모든 프로세스에는 최소 하나 이상의 쓰레드가 존재하며, 둘 이상의 쓰레드를 가진 프로세스를 '멀티쓰레드 프로세스'라고 한다.
- 하나의 프로세스가 가질 수 있는 쓰레드의 갯수는 프로세스의 메모리 한계에 따라 다르다.

## 멀티XXX 기본 개념 정리
- 멀티 프로세싱 : 다수의 프로세서(CPU)가 협력하여 작업을 처리하는 것.
    - 프로세서 : CPU 같은 하드웨어를 의미.
    - 프로세스 : 실행 중인 프로그램을 의미.
- 멀티 프로그래밍 : 하나의 프로세서(CPU)가 하나의 작업을 수행하는 동안 다른 작업에 접근할 수 있도록 하는 것.
- 멀티 태스킹 : 다수의 프로세스를 운영체제의 스케줄링에 의해 작은 단위 시간으로 번갈아 가며 수행되도록 하는 것.
    - 멀티 태스킹의 스케줄링 방식은 멀티 프로그래밍 방식, 시분할 방식, 실시간 시스템 방식을 사용하여 수행한다.
    - 시분할 방식 : CPU의 작업 시간을 작은 시간 단위로 분할 해주는 방식.
    - 실시간 시스템 방식 : 실시간으로 작업을 처리해주는 방식.
- 멀티 스레딩 : 하나의 프로세스를 다수의 쓰레드로 작업함으로서 프로세스를 추가하여 생성하는 것보다 비용이 저렴하고 자원을 공유하여 사용함으로서 메모리 효율도 올라가도록 해주는 처리 방식.

## 멀티 태스킹과 멀티 스레딩
- 오늘날 대부분의 OS는 멀티태스킹을 지원하므로 다수의 프로세스를 동시에 실행 가능하다.
- 멀티 스레딩은 하나의 프로세스 내에서 여러 쓰레드가 동시에 작업을 수행하는 것을 말한다.
- CPU의 코어는 실제 한 순간에 하나의 작업만 가능하다.
- 그러나 코어가 처리해야할 쓰레드의 수는 코어의 갯수보다 많으므로 짧은 시간동안 여러 작업을 번갈아 가며 수행해야 한다.
- 이 속도가 너무 빨라서 동시에 작업하는 것처럼 보인다.

## 멀티 스레딩의 장점
- CPU의 사용률을 향상
- 자원을 효율적으로 사용.
- 사용자에 대한 응답성 향상.
- 작업이 분리되어 코드가 간결.
- 단점 : 멀티 스레딩은 자원을 공유하여 사용하기 때문에 동기화 또는 교착상태와 같은 문제들이 발생할 수 있다.

# 쓰레드의 구현과 실행
## 쓰레드 구현(생성)
- 쓰레드의 구현은 쓰레드 작업 내용을 run() 메서드 바디에 구현하는 것을 의미한다.
1. Thread 클래스 상속
    - run() 메서드 오버라이딩
    - Thread를 상속한 자식 클래스의 객체 생성.
2. Runnable 인터페이스 구현
    - run() 메서드 구현
    - Thread(Runnable target) 생성자식을 통해 객체 생성.
    - run() 메서드는 객체의 참조값(Runnable)에 따라 구현된 메서드를 호출한다.

### Thread 내 static 메서드
- `static Thread currentThread()` : 현재 실행중인 쓰레드의 참조를 반환.
    - Thread를 상속 받은 경우 Thread 내부 메서드를 직접 호출하면 되지만, Runnable을 구현한 경우, 이같은 메서드로 참조를 얻어야 사용이 가능하다.

### Thread 이름 지정
- 관련 메서드 및 생성자
    ```
    String getName() : 쓰레드 이름을 반환.
    Thread(Runnable target, String name)
    Thread(String name)
    void setName(String name)
    ```
- 쓰레드의 이름을 지정하지 않으면 'Threqd-번호' 형식의 이름으로 자동 지정된다.

## 쓰레드 실행
- 쓰레드는 구현(생성) 후 start() 메서드를 호출해야 실행된다.
- start() 메서드 호출 즉시 실행되는 것이 아니라, 실행대기상태(쓰레드 실행 상태)에서 자신의 차례가 되어야 실행된다.
- 한번 실행이 종료된 쓰레드는 다시 start()를 호출할 수 없다.(재실행 불가)
- 다시 실행을 위해서는 쓰레드 생성부터 시작해야한다.

# start()와 run()
## run()
- 메인 메서드에서 run()을 호출하게 되면, 메인 메서드의 호출스택 최상위에 run()이 쌓이게 되는것을 의미한다.

## start()
- 반면에 start()를 호출하면, 새로운 쓰레드 작업을 위한 호출스택을 생성 후 run()을 호출하여 생성된 호출스택에 run()이 쌓이도록 한다.
- 모든 쓰레드는 독립적인 작업을 수행하기 위해 독립 작업 공간인 호출스택을 필요로 하고, 쓰레드 종료 시 호출 스택은 소멸된다.
- 새로운 쓰레드에 의해 호출 스택이 2개가 되면, 스케줄러가 정한 순서에 의해 번갈아 가며 실행된다.
- 쓰레드가 2개 이상일 때에는 호출 스택에 최상위에 있는 메서드도 대기상태일 수 있다.

## 스케줄러
- 스케줄러는 실행대기 중인 쓰레드들의 우선순위를 고려하여 실행순서와 실행시간을 결정해준다.
- 쓰레드들은 스케줄러에 의해 작성된 스케줄에 따라 자신의 순서에 실행시간동안만 작업을 수행한다.
- 이때, 작업을 마치지 못한 쓰레드는 실행 대기 상태로 돌아가 자신의 차례를 다시 기다린다.
- run() 수행을 끝난 종료된 쓰레드는 호출스택이 소멸된다.

## main 쓰레드
- main 쓰레드는 main 메서드의 작업을 수행한다.
- 프로그램이 실행되기 위해서는 최소한 하나의 쓰레드가 필요하므로, 실행 시 쓰레드가 생성되고 생성된 쓰레드는 main 메서드를 호출해 작업을 수행한다.
- 쓰레드가 하나일 때에는 main 쓰레드가 끝나면 프로그램이 종료되었지만, 2개 이상의 쓰레드가 존재할 때에는 실행중인 사용자 쓰레드가 하나도 없을 때에만 프로그램이 종료된다.