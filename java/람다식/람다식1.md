### 2022.02.02 ~ 
# 람다식(Lambda Expression)
## 1. 람다식이란?
- 메서드를 하나의 식(expression)으로 표현한 것.
- 익명함수 라고도 하는데, 람다식으로 표현된 메서드는 메서드명과 반환값을 생략하기 때문이다.
- 람다식은 변수(값)처럼 메서드의 매개변수로 전달되어거나 메서드의 결과로 반환될 수 있다.
> 메서드와 함수의 차이
- 객체지향개념에서는 함수라는 용어 대신 객체의 행위나 동작을 의미하는 메서드라는 용어를 사용합니다.
- 메서드는 함수와 같은 의미이지만, 특정 클래스에 반드시 속해야 한다는 제약이 있다.
- 그러나 람다식을 통해 메서드가 하나의 독립적인 기능 수행이 가능하므로 함수라고 할 수 있다.<br><br>
## 2. 람다식 작성 문법
- 기존 메서드  
반환타입 메서드명 (매개변수 선언){ ... }
- 람다식  
~~반환타입 메서드명~~ (매개변수 선언) -> {...}
### 매개변수 자료형과 괄호 생략하기
- 매개변수 자료형 생략 가능, 단 매개변수 타입이 있는 경우 괄호 생략 불가.
- 매개변수가 하나인 경우, ()괄호도 생략 가능.
- 매개변수가 2개 이상인 경우, ()괄호 생략 불가.
```
str -> { System.out.println(str); } // 매개변수 하나
(String str) -> { System.out.println(str) }// 매개변수 타입이 있음
(x, y) -> { System.out.println(x + y) }//매개변수 2개
```
### 중괄호{} 생략하기
- 중괄호 안의 구현 부분이 한 문장인 경우 중괄호 생략 가능.  
`str -> System.out.println(str);`  
- 중괄호 안의 구현부분이 한 문장이더라도 return 문은 중괄호 생략이 불가.
```
str -> return str.length(); // 에러 발생.
str -> str.length(); // OK.
```
### return 생략하기
- 중괄호 안의 구현 부분이 return문 하나라면 중괄호와 return을 모두 생략하고 식만 쓴다.
```
(x,y) -> x+y
str -> str.length()
```
## 3. 람다식 사용
### 람다식 구현 방법
1. 인터페이스 생성.
2. 구현할 메서드 선언.
```
@FunctionalInterface
interface Calc{
	public int add(int a, int b);
}
```
3. 이때 메서드는 하나만 정의한다.
```
@FunctionalInterface
interface Calc{
	public int add(int a, int b);
}

public class LambdaEx04 {
	public static void main(String[] args) {
		Calc calc = (int a,int b) -> a + b;
		int result = calc.add(20, 30);
		System.out.println(result);
	}
}
```
4. 람다식 구현할 때 되도록 생략 가능한 부분은 생략하여 구현할 것.
### 함수형 인터페이스(Functional Interface)
- 람다식은 함수형 인터페이스의 추상 메서드를 구현한 객체이다.
- 람다식은 오직 하나의 추상 메서드만 선언한 인터페이스를 구현할 수 있다.
    - 람다식은 이름이 없는 함수(익명 함수)로 구현하기 때문에 인터페이스에 추상 메서드가 여러개 있다면 어떤 메서드를 구현한 것인지 모호해 지므로 하나의 메서드만 구현하도록 제한한 것이다.
    - 다만 구현체가 있는 static과 default 메서드는 추가로 정의할 수 있다.
#### @FunctionalInterface 애노테이션
    - 람가식은 하나의 추상 메서드를 선언해야 하므로 실수하기 쉽다.
    - 이러한 실수를 방지하기 위해 @FunctionalInterface 애노테이션을 사용한다.
    - 함수형 인터페이스에 사용하며 내부에 추상 메서드 하나 이상 선언 시 오류가 발생한다.
#### 외부변수를 참조하는 람다식
- 람다식은 익명(지역) 내부 클래스를 구현한 것이다.
    - 함수형 언어에서는 함수만 따로 호출할 수 있지만, 자바에서는 참조 변수 없이 메서드 호출이 불가능하다.
    - 람다식은 익명(지역) 내부 클래스를 구현하고 생성된 인스턴스에서 선언된 메서드를 호출하는 것과 같다.
    - 따라서 람다식은 익명 내부 클래스의 속성과 동일하다.
        - 람다식 내부에서 외부 메서드의 지역변수를 참조하고 있는 경우, 해당 지역변수는 상수화 된다.
        - 지역변수에 대한 참조가 람다식 내부에 살아있게 된다. 이는, 지역변수는 해당 메서드 종료(반환) 시 소멸되므로 이를 방지하고자 상수 형태로 컴파일 하여 메서드 종료 후에도 람다식에서 사용가능하도록 상수화 된다.<br><br>
#### 함수형 인터페이스 타입의 매개변수와 반환 타입
- 메서드의 매개변수가 함수형 인터페이스 타입인 경우, 이 메서드를 호출할 때 람다식을 참조하는 참조변수를 매개변수로 지정하거나, 직접 람다식을 매개변수로 지정해준다.
- 그리고 메서드의 반환형이 함수형 인터페이스 타입인 경우, 이 함수형 인터페이스의 추상메서드와 동등한 람다식을 가리키는 참조변수를 반환하거나, 람다식을 직접 반환할 수 있다.
- 실제로 메서드를 주고받는 것이 아니라 함수형 인터페이스를 구현한 객체를 주고 받는 것이다.<br><br>
## 4. java.util.function 패키지
- 대부분의 메서드의 타입은 비슷하다.
- 일반적으로 자주 사용되는 형식의 메서드를 함수형 인터페이스로 미리 정의해 놓은 패키지.
- 매번 함수형 인터페이스를 정의하기 보다 가능하면 이 패키지의 인터페이스를 활용하는 것이 좋다.
### 주요 함수형 인터페이스!
[Alt text](https://file%2B.vscode-resource.vscode-cdn.net/c%3A/Users/dbe12/OneDrive/%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4/review/Servlet%20%26%20JSP1/%EC%82%AC%EC%A7%84/function%20%ED%8C%A8%ED%82%A4%EC%A7%80%20%EC%A3%BC%EC%9A%94%20%ED%95%A8%EC%88%98%ED%98%95%20%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4.jpg?version%3D1675414601069)